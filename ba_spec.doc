Задание на проработку: Калькулятор-прогнозист доходности по вкладам

Контекст возникновения задачи:

Текущая ситуация: Клиент банка может видеть в приложении только текущий баланс своего вклада. Для того чтобы спрогнозировать доходность, особенно с учетом планируемых пополнений, ему необходимо либо обращаться в колл-центр, либо проводить расчеты самостоятельно, что неудобно и часто приводит к ошибкам.

Проблема: Отсутствие простого и наглядного инструмента для финансового планирования снижает вовлеченность клиентов и упускает возможность стимулировать их к дополнительным вложениям. Клиент не видит, как его действия могут повлиять на итоговый доход.

Бизнес-цель: Предоставить клиентам интерактивный сервис, который повысит их лояльность, мотивирует увеличивать сумму вкладов и снизит нагрузку на службу поддержки.

Что необходимо сделать:

1. Разработать "Калькулятор-прогнозист" как новый функционал в разделе "Мои вклады".
2. Интегрироваться с существующим API (GET api/deposits?clientCode={clientCode}) для получения списка реальных вкладов клиента.
3. Реализовать автозаполнение: При выборе конкретного вклада, калькулятор должен автоматически подгружать и делать нередактируемыми его базовые параметры из API:
   - accBal (текущий остаток по депозитному счету)
   - beginDate (дата начала депозита)
   - period (срок взятия депозита в месяцах)
   - percent (процентная ставка)
   - currency (валюта)
   - endDate (дата окончания депозита)
4. Предоставить возможность прогнозирования: Клиент должен иметь возможность добавлять одно или несколько гипотетических пополнений (сумма и дата).
5. Добавить опцию реинвестирования: Реализовать чекбокс "Учитывать реинвестирование процентов", который будет симулировать добавление начисленных процентов к основной сумме вклада в день их выплаты.
6. Реализовать логику расчета на Front-End в строгом соответствии с утвержденными бизнес-правилами.
7. Отобразить результат: По итогам расчета наглядно показать клиенту:
   - Общую сумму прогнозируемых процентов.
   - Итоговую сумму на счете в конце срока.
   - Детализацию начисленных процентов по каждому месяцу.

Критерии приемки:

1. Выбор вклада: Функционал корректно получает и отображает список действующих вкладов клиента через API api/deposits?clientCode={clientCode}. При выборе вклада все его параметры (accBal, beginDate, period, percent, currency, endDate) без ошибок подставляются в калькулятор.
2. Добавление пополнений: Пользователь может без проблем добавить одно или несколько гипотетических пополнений.
3. Опция реинвестирования: Чекбокс реинвестирования доступен и влияет на итоговый расчет.
4. Расчет соответствует правилу "30 дней": Проценты за 31-е число не начисляются, февраль дополняется до 30 дней, последний месяц полного срока — 29 дней.
5. Расчет соответствует правилу "Пополнения": Довложения начинают влиять на расчет процентов только со следующего дня.
6. Расчет соответствует правилу "Реинвестирования": Если опция включена, начисленные за месяц проценты добавляются к основной сумме в день выплаты и учитываются в расчетах со следующего дня.
7. Расчет соответствует правилу "Первого дня": День открытия вклада не участвует в начислении процентов.
8. Тестовый сценарий проходит: Расчет для эталонного примера дает в точности ожидаемый результат.

Входные данные (из реального API):
- Начальная сумма: 17400 KGS (поле accBal из API)
- Дата открытия: 2024-06-08T00:00:00+06:00 (поле beginDate из API)
- Срок: 12 мес. (поле period из API)
- Ставка: 11.5% (поле percent из API)
- Валюта: KGS (поле currency из API)
- Дата окончания: 2025-06-08T00:00:00+06:00 (поле endDate из API)
- Реинвестирование процентов: false
- Гипотетические пополнения:
  - 09.07.2024: +4000
  - 12.08.2024: +4000
  - 09.09.2024: +4000

Ожидаемый результат:
- Накопленные проценты: 18 060.17 KGS
- Сумма в конце срока: 130 060.17 KGS

Концепция и бизнес-цели

Концепция
Создать интерактивный инструмент ("калькулятор-прогнозист") в мобильном приложении/интернет-банке, который позволяет клиенту на основе его реального, существующего вклада спрогнозировать будущую доходность с учетом гипотетических действий: дополнительных вложений и реинвестирования процентов.

Бизнес-цели
- Повышение вовлеченности: Дать клиентам интерактивный инструмент для управления своими финансами, увеличивая частоту и глубину сессий.
- Стимулирование пополнений: Наглядно демонстрируя, как довложения влияют на итоговый доход, мотивировать клиентов чаще пополнять свои вклады.
- Удержание средств: Повысить лояльность за счет предоставления прозрачного и полезного сервиса для финансового планирования.
- Снижение нагрузки на колл-центр: Предоставить ответы на частые вопросы о доходности вкладов в автоматическом режиме.

Пользовательский сценарий (User Flow)

1. Клиент авторизуется в системе и переходит в раздел "Мои вклады".
2. Он видит список своих активных депозитов, полученных через API api/deposits?clientCode={clientCode}. Рядом с каждым депозитом (или в его деталях) присутствует кнопка/ссылка "Рассчитать прогноз".
3. Клиент нажимает на эту кнопку.
4. Открывается интерфейс калькулятора-прогнозиста. Поля автоматически заполняются данными из выбранного реального вклада:
   - "Текущая сумма" = accBal (остаток по депозитному счету)
   - "Валюта" = currency (KGS, USD, EUR)
   - "Ставка" = percent (процентная ставка)
   - "Дата открытия" = beginDate (дата начала депозита)
   - "Срок" = period (срок в месяцах)
   - "Дата окончания" = endDate (дата окончания депозита)
   Эти поля не редактируются.
5. Ниже пользователю доступны интерактивные элементы:
   - Кнопка "Добавить планируемое пополнение", которая позволяет указать дату и сумму гипотетического довклада. Можно добавить несколько таких пополнений.
   - Чекбокс "Учитывать реинвестирование процентов" (или аналогичный по смыслу).
6. Клиент вводит желаемые гипотетические данные и нажимает кнопку "Рассчитать".
7. Система отображает результат: общую сумму накопленных процентов, итоговую сумму в конце срока и детализацию по месяцам.

Функциональные требования

Источник данных для автозаполнения
Для получения данных по реальным вкладам клиента необходимо использовать существующий API-метод GET api/deposits?clientCode={clientCode}.

Обязательные поля для получения из API:
- accBal (остаток по депозитному счету) - используется как начальная сумма для расчета
- beginDate (дата начала депозита) - используется как дата открытия
- period (срок взятия депозита) - используется как срок в месяцах
- percent (процентная ставка) - используется как ставка для расчета
- currency (валюта) - используется для отображения валюты
- endDate (дата окончания депозита) - используется для определения конечной даты
- status (статус) - используется для фильтрации только активных депозитов (ACTUAL)

Дополнительные поля для отображения информации:
- title (название депозита) - для отображения названия выбранного депозита
- contractNum (номер контракта) - для идентификации депозита
- product (название продукта) - для отображения типа депозита

Бизнес-правила для расчета прогноза
Расчет должен строго следовать приведенным ниже правилам:

1. База для расчета: Год условно принимается за 360 дней.
2. День открытия: Не участвует в начислении процентов. Начисления начинаются со следующего дня.
3. Правило "30 дней в месяце":
   - Каждый полный месяц срока вклада для расчетов считается как 30-дневный.
   - Проценты за 31-е число любого месяца не начисляются.
   - Для февраля к фактическому количеству дней (28 или 29) добавляются "виртуальные" дни, чтобы в сумме получилось 30.
   - Последний месяц срока для полного годового цикла считается как 29-дневный.
4. Правило учета пополнений:
   - Гипотетическое пополнение, добавленное пользователем, учитывается в расчете процентов только со следующего дня.
   - В день пополнения проценты начисляются на сумму до пополнения.
5. Правило реинвестирования процентов:
   - Эта опция симулирует ручное пополнение вклада на сумму выплаченных процентов.
   - День выплаты: Выплата процентов происходит в то же число месяца, в которое был открыт вклад (например, открыт 8 июня, выплата — 8 июля, 8 августа и т.д.).
   - Если опция активна, в день выплаты сумма накопленных за период процентов добавляется к основной сумме вклада и начинает участвовать в расчетах со следующего дня.

Задачи для анализа

Команде бизнес-аналитиков необходимо:

1. Проанализировать реализуемость: Оценить, возможно ли реализовать описанный функционал с технической и ресурсной точки зрения.
2. Проверить источники данных: Подтвердить, что API api/deposits?clientCode={clientCode} действительно отдает все необходимые и корректные данные для старта расчетов. Убедиться в отсутствии противоречий между полями API и требованиями калькулятора.
3. Детализировать требования: Описать полные требования к пользовательскому интерфейсу (UI/UX), включая обработку ошибок (например, если API не вернул данные или вернул пустой массив депозитов).
4. Оценить влияние на системы: Определить, какие системы банка, помимо фронтенда, будут затронуты (если будут).
5. Подготовить User Stories: Сформировать набор пользовательских историй для команды разработки.
6. Провести оценку трудозатрат: Совместно с командой разработки дать предварительную оценку времени, необходимого на реализацию проекта.

Приложение: Для тестирования алгоритма можно использовать эталонный пример из предыдущей версии ТЗ.

---

Страница: Советы внутри продукта

🧠 Суть идеи

В интерфейсе депозита появляются микро-карточки с советами, которые:
- обучают, как использовать продукт эффективнее;
- формируют привычку к регулярному пополнению;
- мотивируют включать функции (например, автопополнение).

Это не банальный FAQ, а контекстные советы, встроенные в саму механику накопления.

📱 Формат отображения

- Лаконичные карточки (1–2 строки)
- Отображаются:
    - при входе в раздел депозита
    - после пополнения
    - после начисления процентов
- Возможность листать / свайпать
- CTA: "Подробнее" → всплывающее окно или переход в FAQ

💬 Примеры карточек

| 🧠 Совет | Поведение, которое мотивируется |
| --- | --- |
| Хочешь накопить быстрее? Включи автопополнение | Активация автопополнения |
| Пополняй в первой половине месяца — так заработаешь больше | Своевременное пополнение |
| Проценты начисляются каждый месяц — не упусти свою выгоду | Удержание депозита |
| Сумма имеет значение: чем больше остаток — тем выше доход | Увеличение суммы депозита |
| Откладывай даже 100 сом — важна регулярность, а не сумма | Преодоление барьера входа |
| Попробуй задать цель — так копить легче | Активация цели накопления |
| Не снимал 3 месяца? Скоро будет бонус к ставке | Удержание, предотвращение снятий |

🎯 Польза для клиента

- Чувство заботы и сопровождения
- Осознание, как работает продукт
- Привычка к регулярному накоплению
- Меньше тревоги — больше понимания

💰 Польза для банка

- Повышение вовлеченности
- Увеличение среднего остатка
- Рост подключений автопополнения
- Уменьшение досрочных закрытий

📊 Метрики

| Показатель | Как влияет фича |
| --- | --- |
| CTR на карточки | Понимание интереса к советам |
| Конверсия в автопополнение | Растёт при грамотном совете |
| Удержание по депозитам | Улучшается при вовлечённости |
| Средний чек и частота пополнений | Становится выше при регулярных подсказках |

🛠️ Расширение

- Советы могут быть персонализированными (на основе поведения клиента)
- Возможность сохранить совет или поделиться

---

Вариант дизайна карточки (как на скриншоте):

┌─────────────────────────────────────────────┐
│                                             │
│   🧠 Совет дня                               │
│   Пополняй в первой половине месяца —       │
│   так заработаешь больше                    │
│                                             │
│   [Подробнее]                               │
└─────────────────────────────────────────────┘

В мобильном приложении:
- Карточка появляется вверху, под балансом и ставкой.
- Цветовая схема и шрифт — как в основном интерфейсе (фон, закругления, иконка "🧠").
- Кнопка "Подробнее" — в фирменном стиле (например, розовая, как "Главная" на скриншоте).
- Возможность свайпать карточки влево/вправо.

---

Если нужно — могу подготовить UX-тексты для дополнительных карточек, сценарии появления советов, а также текстовое описание для дизайнеров. 